(this.webpackJsonpmailstats=this.webpackJsonpmailstats||[]).push([[0],{118:function(e,t,a){e.exports={DiskStats:"DiskStats_DiskStats__2P_eA",pagelabelDisk:"DiskStats_pagelabelDisk__2Acqz",spinnerQueue:"DiskStats_spinnerQueue__3b0xR"}},119:function(e,t,a){e.exports={pagelabelSpam:"SpamStats_pagelabelSpam__MwEh8",datePicker:"SpamStats_datePicker__22t21"}},161:function(e,t,a){e.exports={home:"Home_home__1eVLq"}},223:function(e,t,a){e.exports={spinnerSVC:"SpamChart_spinnerSVC__3UnUP"}},256:function(e,t,a){},262:function(e,t,a){},395:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){},400:function(e,t,a){"use strict";a.r(t);var s,c=a(0),r=a(219),n=a.n(r),i=(a(256),a(10)),l=a(28),u=a(5),o=a(46),j=a(52),d=a.n(j),b=a(420),m=a(3),h=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),n=Object(u.a)(r,2),j=n[0],h=n[1],p=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),console.log("trigger Axios"),e.next=4,o.a.get("https://mailstats-api.onrender.com/api/v1/queueStats");case 4:t=e.sent,console.log(t.data),a=t.data.sort((function(e,t){return Number(new Date(e.documentID))-Number(new Date(t.documentID))})),200===t.status&&(s(a),h(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){p()}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){return p()}),3e4);return function(){return clearInterval(e)}}),[]);var v=Object(m.jsx)(b.a,{color:"#4f5e7d",loading:j,size:33}),O=a.filter((function(e){return"NoData"!==e.serverName}));return console.log(O),Object(m.jsxs)("div",{className:d.a.QueueStats,children:[Object(m.jsx)("div",{className:d.a.pagelabel,children:Object(m.jsx)("p",{children:"SMTP Queue Stats"})}),Object(m.jsx)("div",{className:d.a.spinnerQueue,children:v}),O.map((function(e){return Object(m.jsx)("div",{className:d.a.listItemWrapperQueue,children:Object(m.jsx)("div",{className:d.a.listItemWrapperInnerQueue,children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:d.a.listItemQueue1,children:Object(m.jsx)("div",{className:d.a.serverlabelQueue,children:Object(m.jsx)("p",{children:e.serverName})})}),Object(m.jsxs)("li",{className:d.a.listItemQueue2,children:[Object(m.jsxs)("div",{className:d.a.queueLabel,children:[Object(m.jsx)("p",{className:d.a.label,children:"Queue:"})," ",e.queueName]}),Object(m.jsx)("div",{className:d.a.messageCount,children:e.messageCount})]})]})})})}))]})},p=a(56),v=a.n(p),O=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),n=Object(u.a)(r,2),j=n[0],d=n[1],h=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),console.log("trigger Axios"),e.next=4,o.a.get("https://mailstats-api.onrender.com/api/v1/serviceStats");case 4:t=e.sent,console.log(t.data),a=t.data.sort((function(e,t){return Number(new Date(e.documentID))-Number(new Date(t.documentID))})),200===t.status&&(s(a),d(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){h()}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){return h()}),3e4);return function(){return clearInterval(e)}}),[]);var p=Object(m.jsx)(b.a,{color:"#4f5e7d",loading:j,size:33}),O=a.filter((function(e){return"NoData"!==e.serverName}));return console.log(O),Object(m.jsxs)("div",{className:v.a.ServiceStats,children:[Object(m.jsx)("div",{className:v.a.pagelabelsvc,children:Object(m.jsx)("p",{children:"SMTP Service Stats"})}),Object(m.jsx)("div",{className:v.a.spinnerSVC,children:p}),O.map((function(e){return Object(m.jsx)("div",{className:v.a.listItemWrapperSVC,children:Object(m.jsx)("div",{className:v.a.listItemWrapperInner,children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:v.a.listItemSVC,children:Object(m.jsx)("div",{className:v.a.serverlabelsvc,children:Object(m.jsx)("p",{children:e.serverName})})}),Object(m.jsx)("li",{className:v.a.listItemSVC,children:Object(m.jsxs)("div",{className:v.a.serviceDetails,children:[Object(m.jsx)("p",{className:v.a.servicelabel,children:"Service:"}),Object(m.jsx)("p",{children:e.serviceName})]})})]})})})}))]})},f=a(118),x=a.n(f),S=(a(262),function(e){console.log(e.data);var t=e.data;return Object(m.jsx)("div",{children:t.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"serverlabelDisk",children:Object(m.jsx)("p",{children:e.serverName})}),Object(m.jsxs)("div",{className:"displayFrame",children:[Object(m.jsx)("div",{className:"header",children:"Drive"}),Object(m.jsx)("div",{className:"header",children:"Total Space"}),Object(m.jsx)("div",{className:"header",children:"Free Space"}),Object(m.jsx)("div",{className:"headerBar"}),Object(m.jsx)("div",{className:"header",children:"% Free"})]}),e.volumes.map((function(e){var t,a;console.log(e.capacityGB,e.freeSpaceGB),t=e.capacityGB>=1024?Math.floor(e.capacityGB/1024).toString().concat(" TB"):Math.floor(e.capacityGB).toString().concat(" GB"),a=e.freeSpaceGB>=1024?Math.floor(e.freeSpaceGB/1024).toString().concat(" TB"):Math.floor(e.freeSpaceGB).toString().concat(" GB");var s,c=Math.floor(e.freeSpaceGB/e.capacityGB*100),r=c.toString().concat("%");s=c<15?c<8?"IndianRed":"Gold":"YellowGreen",console.log(r);var n={backgroundColor:s,width:r};return Object(m.jsxs)("div",{className:"volumesMainGrid",children:[Object(m.jsx)("div",{className:"driveLabelDisk",children:e.label}),Object(m.jsx)("div",{className:"totalSizeDisk",children:t}),Object(m.jsx)("div",{className:"freeSpaceDisk",children:a}),Object(m.jsx)("div",{className:"freeSpaceChartBarDisk",children:Object(m.jsx)("div",{className:"diskBar",style:n})}),Object(m.jsxs)("div",{className:"freeSpacePerCentDisk",children:[c,"%"]})]})}))]})}))})}),g=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),n=Object(u.a)(r,2),j=n[0],d=n[1],h=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),console.log("trigger Axios"),e.next=4,o.a.get("https://mailstats-api.onrender.com/api/v1/diskStats");case 4:t=e.sent,a=t.data.sort((function(e,t){return e.serverName.localeCompare(t.serverName)})),200===t.status&&(s(a),d(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){h()}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){return h()}),3e5);return function(){return clearInterval(e)}}),[]);var p=Object(m.jsx)(b.a,{color:"#4f5e7d",loading:j,size:33}),v=a.filter((function(e){return"NoData"!==e.serverName}));return console.log(v),Object(m.jsxs)("div",{className:x.a.DiskStats,children:[Object(m.jsx)("div",{className:x.a.pagelabelDisk,children:Object(m.jsx)("p",{children:"Exchange Disk Stats"})}),Object(m.jsx)("div",{className:x.a.spinnerSVC,children:p}),Object(m.jsx)("div",{className:x.a.WrapperDisk,children:Object(m.jsx)(S,{data:v})})]})},N=a(119),_=a.n(N),k=a(239),y=a(417),I=a(416),D=a(419),C=a(223),Q=a.n(C),w=a(409),E=a(413),B=a(237),G=a(238),P=a(122),V=a(117),W=a(243),H=["MicrosoftExchange329e71ec88ae4615bbc36ab6ce41109e@mahidol.ac.th"],M=function(e){var t=Object(c.useState)([]),a=Object(u.a)(t,2),r=a[0],n=a[1],j=Object(c.useState)(!1),d=Object(u.a)(j,2),h=d[0],p=d[1],v=Object(c.useState)(!1),O=Object(u.a)(v,2),f=O[0],x=O[1],S=Object(c.useState)(25e3),g=Object(u.a)(S,2),N=g[0],_=g[1],k=[0,25e3],y=e.date.start.getFullYear(),I=e.date.start.getMonth()+1,D=e.date.start.getDate();I=String(I).padStart(2,0),D=String(D).padStart(2,0);var C="".concat(y,"-").concat(I,"-").concat(D),M=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(!1),x(!0),"1999-0-1"===t){e.next=7;break}return e.next=5,o.a.get("https://mailstats-api.onrender.com/api/v1/spamStats/?date=".concat(t));case 5:200===(a=e.sent).status&&x(!1);case 7:return e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(){return q=Object(l.a)(Object(i.a)().mark((function e(t){var a,c,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:a=e.sent,c=a.sort((function(e,t){return Number(t.messageCount)-Number(e.messageCount)})),r=c.filter((function(e,t){return t<25})),(s=r.filter((function(e){return!H.includes(e.sender)}))).length>0&&(console.log(s[0].messageCount),_(s[0].messageCount)),n(s),s.length&&p(!0);case 9:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}Object(c.useEffect)((function(){!function(e){q.apply(this,arguments)}(C)}),[C]);var A=Object(m.jsx)(b.a,{color:"#4f5e7d",loading:f,size:33});return k[1]=Number(N),f?Object(m.jsx)("div",{className:Q.a.spinnerSVC,children:A}):h?Object(m.jsx)("div",{children:Object(m.jsxs)(w.a,{layout:"vertical",width:1e3,height:800,data:r,margin:{top:60,right:180,left:180,bottom:5},children:[Object(m.jsx)(E.a,{strokeDasharray:"3 3"}),Object(m.jsx)(B.a,{type:"number",dataKey:"messageCount",domain:k}),Object(m.jsx)(G.a,{type:"category",dataKey:"sender"}),Object(m.jsx)(P.a,{}),Object(m.jsx)(V.a,{}),Object(m.jsx)(W.a,{dataKey:"messageCount",fill:"#3397a5"})]})}):void 0},q=function(){var e=Object(c.useState)({month:10,year:2022}),t=Object(u.a)(e,2),a=t[0],s=a.month,r=a.year,n=t[1],j=Object(c.useState)({start:new Date("1999-1-1"),end:new Date("1999-1-1")}),d=Object(u.a)(j,2),b=d[0],h=d[1],p=Object(c.useState)([]),v=Object(u.a)(p,2),O=v[0],f=v[1],x=Object(c.useState)([]),S=Object(u.a)(x,2),g=S[0],N=S[1],C=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("https://mailstats-api.onrender.com/api/v1/spamStatsDates");case 2:(t=e.sent).status,f(t.data),console.log(t.data[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){C()}),[]);var Q=[];Object(c.useEffect)((function(){!function(e,t){var a=String(e+1).padStart(2,0),s="".concat(t,"-").concat(a),c=document.getElementsByClassName("Polaris-DatePicker__Day");Array.from(c).forEach((function(e){var t=String(e.innerText).padStart(2,0),a="".concat(s,"-").concat(t);if(O.includes(a)&&e.classList.toggle("Polaris-DatePicker__Day__withData"),!O.includes(a)){var c=a.concat("T00:00:00");Q.push(new Date(c))}})),N(Q)}(s,r)}),[s,r,O]);var w=Object(c.useCallback)((function(e,t){return n({month:e,year:t})}),[]);return Object(m.jsxs)("div",{className:_.a.SpamStats,children:[Object(m.jsx)("div",{className:_.a.pagelabelSpam,children:Object(m.jsx)("p",{children:"Top Senders"})}),Object(m.jsx)("div",{className:_.a.datePicker,children:Object(m.jsx)(y.a,{i18n:k,children:Object(m.jsx)(I.a,{children:Object(m.jsx)(D.a,{month:s,year:r,onChange:h,onMonthChange:w,selected:b,disableDatesBefore:new Date("2022-10-31"),disableDatesAfter:new Date,disableSpecificDates:g})})})}),Object(m.jsx)("div",{className:_.a.WrapperSpam,children:Object(m.jsx)(M,{date:b})})]})},A=a(161),L=a.n(A),T=a(421),z=a(154),F=(a(395),function(e){console.log(e.data);var t,a=e.data;return console.log(a),Object(m.jsx)(T.a,{children:a.map((function(e){return console.log(e[Object.keys(e)[0]]),t="unhealthy"===e[Object.keys(e)[0]].queuesHealth||"unhealthy"===e[Object.keys(e)[0]].servicesHealth||"unhealthy"===e[Object.keys(e)[0]].diskHealth?{borderLeft:"10px solid IndianRed"}:{borderLeft:"10px solid YellowGreen"},Object(m.jsx)("div",{style:t,children:Object(m.jsx)(T.a.Item,{title:Object.keys(e)[0],children:Object(m.jsxs)(z.c,{children:[Object(m.jsxs)("div",{className:"heatlhItemGrid",children:[Object(m.jsx)("div",{className:"healthItemPara",children:"Services : "}),Object(m.jsx)("div",{className:"healthItemParaStatus",children:e[Object.keys(e)[0]].servicesHealth})]}),Object(m.jsxs)("div",{className:"heatlhItemGrid",children:[Object(m.jsx)("div",{className:"healthItemPara",children:"Mail Queues : "}),Object(m.jsx)("div",{className:"healthItemParaStatus",children:e[Object.keys(e)[0]].queuesHealth})]}),Object(m.jsxs)("div",{className:"heatlhItemGrid",children:[Object(m.jsx)("div",{className:"healthItemPara",children:"Disk Space : "}),Object(m.jsx)("div",{className:"healthItemParaStatus",children:e[Object.keys(e)[0]].diskHealth})]})]})})},Object.keys(e)[0])}))})});var R=function(){var e,t,a=Object(c.useState)([]),s=Object(u.a)(a,2),r=s[0],n=s[1],j=Object(c.useState)(!1),d=Object(u.a)(j,2),h=d[0],p=d[1],v=function(){var a=Object(l.a)(Object(i.a)().mark((function a(){var s,c,r,l,u,j,d,b,m,h,v;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return p(!0),a.next=3,o.a.get("https://mailstats-api.onrender.com/api/v1/diskStats");case 3:return s=a.sent,c=s.data.sort((function(e,t){return e.serverName.localeCompare(t.serverName)})),r=c.filter((function(e){return"NoData"!==e.serverName})),console.log(r),t=new Array(0),r.forEach((function(e){t.push(e.serverName)})),e=new Array(0),t.forEach((function(t){var a={};a[t]={diskHealth:"healthy",servicesHealth:"healthy",queuesHealth:"healthy"},e.push(a)})),r.forEach((function(t){t.volumes.forEach((function(a){a.freeSpaceGB/a.capacityGB<.15&&(console.log("".concat(t.serverName," unheathy volumes")),e.find((function(e){return Object.keys(e).includes(t.serverName)}))[t.serverName].diskHealth="unhealthy")}))})),a.next=14,o.a.get("https://mailstats-api.onrender.com/api/v1/serviceStats");case 14:return l=a.sent,u=l.data.sort((function(e,t){return e.serverName.localeCompare(t.serverName)})),j=u.filter((function(e){return"NoData"!==e.serverName})),console.log(j),d=[],j.forEach((function(e){return d.push(e.serverName)})),console.log(d),t.forEach((function(t){d.includes(t)&&(e.find((function(e){return Object.keys(e).includes(t)}))[t].servicesHealth="unhealthy")})),a.next=24,o.a.get("https://mailstats-api.onrender.com/api/v1/queueStats");case 24:b=a.sent,m=b.data.sort((function(e,t){return e.serverName.localeCompare(t.serverName)})),h=m.filter((function(e){return"NoData"!==e.serverName})),console.log(h),v=[],h.forEach((function(e){return v.push(e.serverName)})),console.log(v),t.forEach((function(t){v.includes(t)&&(e.find((function(e){return Object.keys(e).includes(t)}))[t].queuesHealth="unhealthy")})),200===b.status&&(console.log(e),n(e),p(!1));case 33:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(c.useEffect)((function(){v()}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){v()}),3e4);return function(){return clearInterval(e)}}),[]);var O=Object(m.jsx)(b.a,{color:"#4f5e7d",loading:h,size:33});return console.log(r),Object(m.jsxs)("div",{className:L.a.home,children:[Object(m.jsx)("p",{children:"Mail Stats"}),Object(m.jsx)("div",{className:L.a.spinnerSVC,children:O}),Object(m.jsx)("div",{className:L.a.WrapperAccordion,children:Object(m.jsx)(F,{data:r})})]})},J=a(79),U=a(9),Y=a(415),K=a(422),X=a(99);a(398);var Z=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),a=t[0],s=t[1];return Object(m.jsxs)(Y.a,{isOpen:a,onClose:function(){return s(!1)},children:[Object(m.jsx)(Y.a.Trigger,{children:Object(m.jsx)(K.a,{variant:"secondary",icon:Object(m.jsx)(X.c,{}),"aria-label":"toggle menu",onClick:function(){return s(!a)}})}),Object(m.jsx)(Y.a.List,{children:Object(m.jsxs)("div",{className:"menuList",children:[Object(m.jsx)(J.b,{to:"/Home",component:Y.a.Item,as:"a",children:"Home"}),Object(m.jsx)(Y.a.Divider,{}),Object(m.jsx)(J.b,{to:"/queuestats",component:Y.a.Item,as:"a",children:"Mail Queue Statistics"}),Object(m.jsx)(Y.a.Divider,{}),Object(m.jsx)(J.b,{to:"/servicestats",component:Y.a.Item,as:"a",children:"Mail Service Statistics"}),Object(m.jsx)(Y.a.Divider,{}),Object(m.jsx)(J.b,{to:"/diskstats",component:Y.a.Item,as:"a",children:"Server Disk Statistics"}),Object(m.jsx)(Y.a.Divider,{}),Object(m.jsx)(J.b,{to:"/spamstats",component:Y.a.Item,as:"a",children:"Top Senders"})]})})]})},$=(a(399),function(){return Object(m.jsx)("div",{className:"AppFrame",children:Object(m.jsxs)(J.a,{children:[Object(m.jsx)("div",{className:"burger",children:Object(m.jsx)(Z,{})}),Object(m.jsxs)(U.c,{children:[Object(m.jsx)(U.a,{exact:!0,path:"/",element:Object(m.jsx)(R,{})}),Object(m.jsx)(U.a,{path:"/home",element:Object(m.jsx)(R,{})}),Object(m.jsx)(U.a,{path:"/queuestats",element:Object(m.jsx)(h,{})}),Object(m.jsx)(U.a,{path:"/servicestats",element:Object(m.jsx)(O,{})}),Object(m.jsx)(U.a,{path:"/diskstats",element:Object(m.jsx)(g,{})}),Object(m.jsx)(U.a,{path:"/spamstats",element:Object(m.jsx)(q,{})})]})]})})});n.a.createRoot(document.getElementById("root")).render(Object(m.jsx)($,{}))},52:function(e,t,a){e.exports={QueueStats:"QueueStats_QueueStats__3HxaU",pagelabel:"QueueStats_pagelabel__o05Yc",spinnerQueue:"QueueStats_spinnerQueue__2J6A0",listItemWrapperInnerQueue:"QueueStats_listItemWrapperInnerQueue__1hpZN",listItemWrapperQueue:"QueueStats_listItemWrapperQueue__2r6gW",serverlabelQueue:"QueueStats_serverlabelQueue__28LJ2",listItemQueue1:"QueueStats_listItemQueue1__2WsVA",listItemQueue2:"QueueStats_listItemQueue2__3NgDa",queueLabel:"QueueStats_queueLabel__2zniX",messageCount:"QueueStats_messageCount__1jm5i"}},56:function(e,t,a){e.exports={ServiceStats:"ServiceStats_ServiceStats__1kFmg",pagelabelsvc:"ServiceStats_pagelabelsvc__1Riwq",spinnerSVC:"ServiceStats_spinnerSVC__3-a_t",listItemWrapperInner:"ServiceStats_listItemWrapperInner__41eAf",listItemWrapperSVC:"ServiceStats_listItemWrapperSVC__t2VWz",serverlabelsvc:"ServiceStats_serverlabelsvc__lE6Iu",servicelabel:"ServiceStats_servicelabel__2IAB9",listItemSVC:"ServiceStats_listItemSVC__2yyI0",serviceDetails:"ServiceStats_serviceDetails__3hkU4"}}},[[400,1,2]]]);
//# sourceMappingURL=main.0a593f55.chunk.js.map